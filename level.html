<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>آزمون تعیین سطح زبان</title>
  <style>
    /* استایل عمومی */
    body {
      font-family: Arial, sans-serif;
      direction: rtl;
      margin: 0;
      padding: 0;
      background: #f9f9f9;
    }
    .container {
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
    }
    /* تایمر */
    #timer {
      position: fixed;
      top: 10px;
      right: 10px;
      background: #fff;
      padding: 10px 15px;
      border: 2px solid #4CAF50;
      border-radius: 50px;
      font-size: 18px;
      font-weight: bold;
      z-index: 1000;
      animation: fadeIn 1s ease;
    }
    /* استایل بخش‌ها */
    .section {
      background: #fff;
      border: 1px solid #ccc;
      padding: 15px;
      margin-bottom: 30px;
      border-radius: 5px;
      animation: fadeIn 1s ease;
    }
    .question {
      margin-bottom: 15px;
      animation: fadeIn 1s ease;
    }
    .option {
      margin-left: 20px;
      display: block;
      margin-bottom: 5px;
    }
    /* استایل پاپ‌آپ‌ها */
    .modal {
      display: none; /* به صورت اولیه پنهان */
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.5);
      animation: fadeIn 0.5s ease;
    }
    .modal-content {
      background-color: #fefefe;
      margin: 15% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      max-width: 400px;
      border-radius: 10px;
      text-align: center;
      position: relative;
      animation: slideIn 0.5s ease;
    }
    /* استایل ورودی‌های پاپ‌آپ شروع */
    .modal-content input[type="text"] {
      width: 80%;
      font-size: 16px;
      padding: 5px;
      margin-bottom: 10px;
    }
    .modal-content button {
      padding: 10px 20px;
      font-size: 16px;
      background: #4CAF50;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }
    /* پاپ‌آپ نتیجه (Result Modal) */
    #resultModal .modal-content {
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
    }
    /* کلید ارسال */
    input[type="submit"] {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      background: #4CAF50;
      border: none;
      color: white;
      border-radius: 5px;
      animation: fadeIn 1s ease;
    }
    /* انیمیشن‌ها */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes slideIn {
      from { transform: translateY(-50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
  </style>
  <script>
    // پلی‌فیل برای endsWith (مورد نیاز در مرورگرهای قدیمی‌تر)
    if (!String.prototype.endsWith) {
      String.prototype.endsWith = function(searchString, position) {
        var subjectString = this.toString();
        if (position === undefined || position > subjectString.length) {
          position = subjectString.length;
        }
        position -= searchString.length;
        var lastIndex = subjectString.indexOf(searchString, position);
        return lastIndex !== -1 && lastIndex === position;
      };
    }

       // در صورت ریلود صفحه، هدایت به index.html
       if (performance.navigation.type === performance.navigation.TYPE_RELOAD) {
      window.location.href = "index.html";
    }
    
  </script>
</head>
<body>
  <!-- تایمر -->
  <div id="timer">15:00</div>
  
  <!-- پاپ‌آپ شروع -->
  <div id="startModal" class="modal">
    <div class="modal-content">
      <h2>آزمون تعیین سطح زبان</h2>
      <p>لطفاً اطلاعات زیر را وارد کنید:</p>
      <input type="text" id="nationalCode" placeholder="کد ملی">
      <input type="text" id="userName" placeholder="نام">
      <p>شما 15 دقیقه زمان دارید.</p>
      <button id="startButton">شروع آزمون</button>
    </div>
  </div>
  
  <div class="container">
    <h1>آزمون تعیین سطح زبان</h1>
    <form id="quizForm" onsubmit="return gradeQuiz();">
      
      <!-- بخش واژگان (Vocabulary Section) -->
      <div class="section" id="vocabulary">
        <h2>بخش واژگان (سطح آسان‌تر)</h2>
        
        <div class="question">
          <h3>1. معادل کلمه‌ای: معادل مناسب واژه‌ی "happy" چیست؟</h3>
          <label class="option"><input type="radio" name="qv1" value="A"> A) glad</label>
          <label class="option"><input type="radio" name="qv1" value="B"> B) sad</label>
          <label class="option"><input type="radio" name="qv1" value="C"> C) angry</label>
          <label class="option"><input type="radio" name="qv1" value="D"> D) tired</label>
        </div>
        
        <div class="question">
          <h3>2. معنی اصطلاح: اصطلاح "break a leg" در موقعیت‌های نمایشی به چه معناست؟</h3>
          <label class="option"><input type="radio" name="qv2" value="A"> A) شانس بد</label>
          <label class="option"><input type="radio" name="qv2" value="B"> B) موفقیت و آرزوی موفقیت</label>
          <label class="option"><input type="radio" name="qv2" value="C"> C) آسیب دیدن</label>
          <label class="option"><input type="radio" name="qv2" value="D"> D) از پای افتادن</label>
        </div>
        
        <div class="question">
          <h3>3. ضد کلمه: کدام گزینه، ضد کلمه‌ی "big" را نشان می‌دهد؟</h3>
          <label class="option"><input type="radio" name="qv3" value="A"> A) huge</label>
          <label class="option"><input type="radio" name="qv3" value="B"> B) small</label>
          <label class="option"><input type="radio" name="qv3" value="C"> C) giant</label>
          <label class="option"><input type="radio" name="qv3" value="D"> D) large</label>
        </div>
        
        <div class="question">
          <h3>4. نقش دستوری: در جمله "She sings beautifully." واژه‌ی "beautifully" چه نقشی دارد؟</h3>
          <label class="option"><input type="radio" name="qv4" value="A"> A) اسم</label>
          <label class="option"><input type="radio" name="qv4" value="B"> B) صفت</label>
          <label class="option"><input type="radio" name="qv4" value="C"> C) قید</label>
          <label class="option"><input type="radio" name="qv4" value="D"> D) فعل</label>
        </div>
        
        <div class="question">
          <h3>5. معادل کلمه‌ای: نزدیک‌ترین معنی به واژه‌ی "smart" چیست؟</h3>
          <label class="option"><input type="radio" name="qv5" value="A"> A) clever</label>
          <label class="option"><input type="radio" name="qv5" value="B"> B) lazy</label>
          <label class="option"><input type="radio" name="qv5" value="C"> C) quiet</label>
          <label class="option"><input type="radio" name="qv5" value="D"> D) noisy</label>
        </div>
        
        <div class="question">
          <h3>6. ضد کلمه: کدام گزینه، ضد کلمه‌ی "cold" است؟</h3>
          <label class="option"><input type="radio" name="qv6" value="A"> A) hot</label>
          <label class="option"><input type="radio" name="qv6" value="B"> B) cool</label>
          <label class="option"><input type="radio" name="qv6" value="C"> C) chilly</label>
          <label class="option"><input type="radio" name="qv6" value="D"> D) freezing</label>
        </div>
        
        <div class="question">
          <h3>7. معناشناسی: جمله زیر را کامل کنید: "He is very ___ in solving puzzles."</h3>
          <label class="option"><input type="radio" name="qv7" value="A"> A) good</label>
          <label class="option"><input type="radio" name="qv7" value="B"> B) fast</label>
          <label class="option"><input type="radio" name="qv7" value="C"> C) clever</label>
          <label class="option"><input type="radio" name="qv7" value="D"> D) strong</label>
        </div>
        
        <div class="question">
          <h3>8. معادل کلمه‌ای: معادل مناسب واژه‌ی "begin" چیست؟</h3>
          <label class="option"><input type="radio" name="qv8" value="A"> A) finish</label>
          <label class="option"><input type="radio" name="qv8" value="B"> B) start</label>
          <label class="option"><input type="radio" name="qv8" value="C"> C) close</label>
          <label class="option"><input type="radio" name="qv8" value="D"> D) end</label>
        </div>
        
        <div class="question">
          <h3>9. معنی فعل: نزدیک‌ترین معنی به واژه‌ی "yell" چیست؟</h3>
          <label class="option"><input type="radio" name="qv9" value="A"> A) whisper</label>
          <label class="option"><input type="radio" name="qv9" value="B"> B) speak quietly</label>
          <label class="option"><input type="radio" name="qv9" value="C"> C) shout</label>
          <label class="option"><input type="radio" name="qv9" value="D"> D) murmur</label>
        </div>
        
        <div class="question">
          <h3>10. تعریف: واژه‌ی "brave" به چه معناست؟</h3>
          <label class="option"><input type="radio" name="qv10" value="A"> A) timid</label>
          <label class="option"><input type="radio" name="qv10" value="B"> B) courageous</label>
          <label class="option"><input type="radio" name="qv10" value="C"> C) fearful</label>
          <label class="option"><input type="radio" name="qv10" value="D"> D) weak</label>
        </div>
      </div>
      
      <!-- بخش گرامر (Grammar Section) -->
      <div class="section" id="grammar">
        <h2>بخش گرامر</h2>
        
        <!-- 1. Present Simple -->
        <h3>1. حال ساده (Present Simple)</h3>
        <div class="question">
          <h4>1. انتخاب جمله صحیح: کدام گزینه جمله‌ای درست در زمان حال ساده است؟</h4>
          <label class="option"><input type="radio" name="g1" value="A"> A) He go to school every day.</label>
          <label class="option"><input type="radio" name="g1" value="B"> B) He goes to school every day.</label>
          <label class="option"><input type="radio" name="g1" value="C"> C) He going to school every day.</label>
          <label class="option"><input type="radio" name="g1" value="D"> D) He gone to school every day.</label>
        </div>
        <div class="question">
          <h4>2. تکمیل جمله: "She ___ coffee every morning."</h4>
          <label class="option"><input type="radio" name="g2" value="A"> A) drink</label>
          <label class="option"><input type="radio" name="g2" value="B"> B) drinks</label>
          <label class="option"><input type="radio" name="g2" value="C"> C) drinking</label>
          <label class="option"><input type="radio" name="g2" value="D"> D) drank</label>
        </div>
        <div class="question">
          <h4>3. انتخاب جمله منفی صحیح: کدام گزینه جمله منفی صحیح در زمان حال ساده است؟</h4>
          <label class="option"><input type="radio" name="g3" value="A"> A) They doesn't like chocolate.</label>
          <label class="option"><input type="radio" name="g3" value="B"> B) They don't like chocolate.</label>
          <label class="option"><input type="radio" name="g3" value="C"> C) They not like chocolate.</label>
          <label class="option"><input type="radio" name="g3" value="D"> D) They doesn't likes chocolate.</label>
        </div>
        
        <!-- 2. Present Continuous -->
        <h3>2. حال استمراری (Present Continuous)</h3>
        <div class="question">
          <h4>4. انتخاب جمله صحیح: کدام گزینه جمله‌ای صحیح در زمان حال استمراری است؟</h4>
          <label class="option"><input type="radio" name="g4" value="A"> A) He is playing football now.</label>
          <label class="option"><input type="radio" name="g4" value="B"> B) He playing football now.</label>
          <label class="option"><input type="radio" name="g4" value="C"> C) He are playing football now.</label>
          <label class="option"><input type="radio" name="g4" value="D"> D) He be playing football now.</label>
        </div>
        <div class="question">
          <h4>5. تکمیل جمله: "They ___ watching a movie at the moment."</h4>
          <label class="option"><input type="radio" name="g5" value="A"> A) is</label>
          <label class="option"><input type="radio" name="g5" value="B"> B) are</label>
          <label class="option"><input type="radio" name="g5" value="C"> C) was</label>
          <label class="option"><input type="radio" name="g5" value="D"> D) be</label>
        </div>
        <div class="question">
          <h4>6. انتخاب جمله منفی صحیح: کدام گزینه جمله منفی صحیح در زمان حال استمراری است؟</h4>
          <label class="option"><input type="radio" name="g6" value="A"> A) She isn't reading a book.</label>
          <label class="option"><input type="radio" name="g6" value="B"> B) She not reading a book.</label>
          <label class="option"><input type="radio" name="g6" value="C"> C) She don't reading a book.</label>
          <label class="option"><input type="radio" name="g6" value="D"> D) She isn't read a book.</label>
        </div>
        
        <!-- 3. Present Perfect -->
        <h3>3. حال کامل (Present Perfect)</h3>
        <div class="question">
          <h4>7. انتخاب جمله صحیح: کدام گزینه جمله‌ای صحیح در زمان حال کامل است؟</h4>
          <label class="option"><input type="radio" name="g7" value="A"> A) I have seen that film.</label>
          <label class="option"><input type="radio" name="g7" value="B"> B) I seen that film.</label>
          <label class="option"><input type="radio" name="g7" value="C"> C) I have saw that film.</label>
          <label class="option"><input type="radio" name="g7" value="D"> D) I see that film.</label>
        </div>
        <div class="question">
          <h4>8. تکمیل جمله: "We ___ visited Paris."</h4>
          <label class="option"><input type="radio" name="g8" value="A"> A) has</label>
          <label class="option"><input type="radio" name="g8" value="B"> B) have</label>
          <label class="option"><input type="radio" name="g8" value="C"> C) had</label>
          <label class="option"><input type="radio" name="g8" value="D"> D) will have</label>
        </div>
        <div class="question">
          <h4>9. انتخاب جمله منفی صحیح: کدام گزینه جمله منفی صحیح در زمان حال کامل است؟</h4>
          <label class="option"><input type="radio" name="g9" value="A"> A) He hasn't finished his homework yet.</label>
          <label class="option"><input type="radio" name="g9" value="B"> B) He haven't finished his homework yet.</label>
          <label class="option"><input type="radio" name="g9" value="C"> C) He not finished his homework yet.</label>
          <label class="option"><input type="radio" name="g9" value="D"> D) He didn't finished his homework yet.</label>
        </div>
        
        <!-- 4. Past Simple -->
        <h3>4. گذشته ساده (Past Simple)</h3>
        <div class="question">
          <h4>10. انتخاب جمله صحیح: کدام گزینه جمله‌ای صحیح در زمان گذشته ساده است؟</h4>
          <label class="option"><input type="radio" name="g10" value="A"> A) I visited my friend yesterday.</label>
          <label class="option"><input type="radio" name="g10" value="B"> B) I visit my friend yesterday.</label>
          <label class="option"><input type="radio" name="g10" value="C"> C) I visiting my friend yesterday.</label>
          <label class="option"><input type="radio" name="g10" value="D"> D) I have visited my friend yesterday.</label>
        </div>
        <div class="question">
          <h4>11. تکمیل جمله: "She ___ a new book last week."</h4>
          <label class="option"><input type="radio" name="g11" value="A"> A) buys</label>
          <label class="option"><input type="radio" name="g11" value="B"> B) buy</label>
          <label class="option"><input type="radio" name="g11" value="C"> C) bought</label>
          <label class="option"><input type="radio" name="g11" value="D"> D) has bought</label>
        </div>
        <div class="question">
          <h4>12. انتخاب جمله منفی صحیح: کدام گزینه جمله منفی صحیح در زمان گذشته ساده است؟</h4>
          <label class="option"><input type="radio" name="g12" value="A"> A) They didn't go to the party.</label>
          <label class="option"><input type="radio" name="g12" value="B"> B) They don't went to the party.</label>
          <label class="option"><input type="radio" name="g12" value="C"> C) They didn't went to the party.</label>
          <label class="option"><input type="radio" name="g12" value="D"> D) They not go to the party.</label>
        </div>
        
        <!-- 5. Past Continuous -->
        <h3>5. گذشته استمراری (Past Continuous)</h3>
        <div class="question">
          <h4>13. انتخاب جمله صحیح: کدام گزینه جمله‌ای صحیح در زمان گذشته استمراری است؟</h4>
          <label class="option"><input type="radio" name="g13" value="A"> A) I was reading a book when you called.</label>
          <label class="option"><input type="radio" name="g13" value="B"> B) I were reading a book when you called.</label>
          <label class="option"><input type="radio" name="g13" value="C"> C) I am reading a book when you called.</label>
          <label class="option"><input type="radio" name="g13" value="D"> D) I read a book when you called.</label>
        </div>
        <div class="question">
          <h4>14. تکمیل جمله: "They ___ playing football at 5 PM yesterday."</h4>
          <label class="option"><input type="radio" name="g14" value="A"> A) was</label>
          <label class="option"><input type="radio" name="g14" value="B"> B) were</label>
          <label class="option"><input type="radio" name="g14" value="C"> C) are</label>
          <label class="option"><input type="radio" name="g14" value="D"> D) be</label>
        </div>
        <div class="question">
          <h4>15. انتخاب جمله منفی صحیح: کدام گزینه جمله منفی صحیح در زمان گذشته استمراری است؟</h4>
          <label class="option"><input type="radio" name="g15" value="A"> A) He wasn't watching TV when I arrived.</label>
          <label class="option"><input type="radio" name="g15" value="B"> B) He not watching TV when I arrived.</label>
          <label class="option"><input type="radio" name="g15" value="C"> C) He didn't watching TV when I arrived.</label>
          <label class="option"><input type="radio" name="g15" value="D"> D) He weren't watching TV when I arrived.</label>
        </div>
        
        <!-- 6. Past Perfect -->
        <h3>6. گذشته کامل (Past Perfect)</h3>
        <div class="question">
          <h4>16. انتخاب جمله صحیح: کدام گزینه جمله‌ای صحیح در زمان گذشته کامل است؟</h4>
          <label class="option"><input type="radio" name="g16" value="A"> A) They had left before I arrived.</label>
          <label class="option"><input type="radio" name="g16" value="B"> B) They have left before I arrived.</label>
          <label class="option"><input type="radio" name="g16" value="C"> C) They left before I had arrived.</label>
          <label class="option"><input type="radio" name="g16" value="D"> D) They had leave before I arrived.</label>
        </div>
        <div class="question">
          <h4>17. تکمیل جمله: "By the time she came, we ___ finished dinner."</h4>
          <label class="option"><input type="radio" name="g17" value="A"> A) have</label>
          <label class="option"><input type="radio" name="g17" value="B"> B) had</label>
          <label class="option"><input type="radio" name="g17" value="C"> C) will have</label>
          <label class="option"><input type="radio" name="g17" value="D"> D) was</label>
        </div>
        <div class="question">
          <h4>18. انتخاب جمله منفی صحیح: کدام گزینه جمله منفی صحیح در زمان گذشته کامل است؟</h4>
          <label class="option"><input type="radio" name="g18" value="A"> A) He hadn't seen the movie before last night.</label>
          <label class="option"><input type="radio" name="g18" value="B"> B) He hasn't seen the movie before last night.</label>
          <label class="option"><input type="radio" name="g18" value="C"> C) He not seen the movie before last night.</label>
          <label class="option"><input type="radio" name="g18" value="D"> D) He didn't seen the movie before last night.</label>
        </div>
        
        <!-- 7. Future Simple -->
        <h3>7. آینده ساده (Future Simple)</h3>
        <div class="question">
          <h4>19. انتخاب جمله صحیح: کدام گزینه جمله‌ای صحیح در زمان آینده ساده است؟</h4>
          <label class="option"><input type="radio" name="g19" value="A"> A) I will go to the park tomorrow.</label>
          <label class="option"><input type="radio" name="g19" value="B"> B) I go to the park tomorrow.</label>
          <label class="option"><input type="radio" name="g19" value="C"> C) I will going to the park tomorrow.</label>
          <label class="option"><input type="radio" name="g19" value="D"> D) I going to the park tomorrow.</label>
        </div>
        <div class="question">
          <h4>20. تکمیل جمله: "She ___ call you later."</h4>
          <label class="option"><input type="radio" name="g20" value="A"> A) will</label>
          <label class="option"><input type="radio" name="g20" value="B"> B) is</label>
          <label class="option"><input type="radio" name="g20" value="C"> C) would</label>
          <label class="option"><input type="radio" name="g20" value="D"> D) can</label>
        </div>
        <div class="question">
          <h4>21. انتخاب جمله سوالی صحیح: کدام گزینه سوال صحیح در زمان آینده ساده است؟</h4>
          <label class="option"><input type="radio" name="g21" value="A"> A) Will they join us for dinner?</label>
          <label class="option"><input type="radio" name="g21" value="B"> B) Do they will join us for dinner?</label>
          <label class="option"><input type="radio" name="g21" value="C"> C) Are they join us for dinner?</label>
          <label class="option"><input type="radio" name="g21" value="D"> D) They will join us for dinner?</label>
        </div>
        
        <!-- 8. Future Continuous -->
        <h3>8. آینده استمراری (Future Continuous)</h3>
        <div class="question">
          <h4>22. انتخاب جمله صحیح: کدام گزینه جمله‌ای صحیح در زمان آینده استمراری است؟</h4>
          <label class="option"><input type="radio" name="g22" value="A"> A) I will be working at 9 AM tomorrow.</label>
          <label class="option"><input type="radio" name="g22" value="B"> B) I will working at 9 AM tomorrow.</label>
          <label class="option"><input type="radio" name="g22" value="C"> C) I am be working at 9 AM tomorrow.</label>
          <label class="option"><input type="radio" name="g22" value="D"> D) I working at 9 AM tomorrow.</label>
        </div>
        <div class="question">
          <h4>23. تکمیل جمله: "At this time next week, they ___ traveling around Europe."</h4>
          <label class="option"><input type="radio" name="g23" value="A"> A) will be</label>
          <label class="option"><input type="radio" name="g23" value="B"> B) are</label>
          <label class="option"><input type="radio" name="g23" value="C"> C) were</label>
          <label class="option"><input type="radio" name="g23" value="D"> D) will</label>
        </div>
        <div class="question">
          <h4>24. انتخاب جمله منفی صحیح: کدام گزینه جمله منفی صحیح در زمان آینده استمراری است؟</h4>
          <label class="option"><input type="radio" name="g24" value="A"> A) She won't be attending the meeting.</label>
          <label class="option"><input type="radio" name="g24" value="B"> B) She will not attending the meeting.</label>
          <label class="option"><input type="radio" name="g24" value="C"> C) She not be attending the meeting.</label>
          <label class="option"><input type="radio" name="g24" value="D"> D) She won't attending the meeting.</label>
        </div>
        
        <!-- 9. Future Perfect -->
        <h3>9. آینده کامل (Future Perfect)</h3>
        <div class="question">
          <h4>25. انتخاب جمله صحیح: کدام گزینه جمله‌ای صحیح در زمان آینده کامل است؟</h4>
          <label class="option"><input type="radio" name="g25" value="A"> A) By next year, I will have graduated.</label>
          <label class="option"><input type="radio" name="g25" value="B"> B) By next year, I will have graduate.</label>
          <label class="option"><input type="radio" name="g25" value="C"> C) By next year, I will graduate.</label>
          <label class="option"><input type="radio" name="g25" value="D"> D) By next year, I have graduated.</label>
        </div>
        <div class="question">
          <h4>26. تکمیل جمله: "They ___ completed the project by tomorrow."</h4>
          <label class="option"><input type="radio" name="g26" value="A"> A) will have</label>
          <label class="option"><input type="radio" name="g26" value="B"> B) will</label>
          <label class="option"><input type="radio" name="g26" value="C"> C) have</label>
          <label class="option"><input type="radio" name="g26" value="D"> D) had</label>
        </div>
        <div class="question">
          <h4>27. انتخاب جمله منفی صحیح: کدام گزینه جمله منفی صحیح در زمان آینده کامل است؟</h4>
          <label class="option"><input type="radio" name="g27" value="A"> A) He won't have finished the work by then.</label>
          <label class="option"><input type="radio" name="g27" value="B"> B) He won't finished the work by then.</label>
          <label class="option"><input type="radio" name="g27" value="C"> C) He will not finished the work by then.</label>
          <label class="option"><input type="radio" name="g27" value="D"> D) He not will have finished the work by then.</label>
        </div>
        
        <!-- 10. Active and Passive Voice -->
        <h3>10. جملات معلوم و مجهول (Active and Passive Voice)</h3>
        <div class="question">
          <h4>28. انتخاب جمله مجهول صحیح: کدام گزینه جمله‌ای صحیح در حالت مجهول است؟</h4>
          <label class="option"><input type="radio" name="g28" value="A"> A) The cake was baked by my mother.</label>
          <label class="option"><input type="radio" name="g28" value="B"> B) My mother baked the cake.</label>
          <label class="option"><input type="radio" name="g28" value="C"> C) The cake is baked by my mother.</label>
          <label class="option"><input type="radio" name="g28" value="D"> D) The cake baked by my mother.</label>
        </div>
        <div class="question">
          <h4>29. تبدیل جمله فعال به مجهول: جمله "They built the house." به صورت مجهول چیست؟</h4>
          <label class="option"><input type="radio" name="g29" value="A"> A) The house was built by them.</label>
          <label class="option"><input type="radio" name="g29" value="B"> B) The house is built by them.</label>
          <label class="option"><input type="radio" name="g29" value="C"> C) The house built by them.</label>
          <label class="option"><input type="radio" name="g29" value="D"> D) The house has been built by them.</label>
        </div>
        <div class="question">
          <h4>30. انتخاب جمله معلوم صحیح: کدام گزینه جمله‌ای صحیح در حالت معلوم (Active) است؟</h4>
          <label class="option"><input type="radio" name="g30" value="A"> A) The report was written by John.</label>
          <label class="option"><input type="radio" name="g30" value="B"> B) John wrote the report.</label>
          <label class="option"><input type="radio" name="g30" value="C"> C) The report is written by John.</label>
          <label class="option"><input type="radio" name="g30" value="D"> D) The report has been written by John.</label>
        </div>
        
        <!-- 11. Modal (Modal Sentences) -->
        <h3>11. جملات مدال (Modal Sentences)</h3>
        <div class="question">
          <h4>31. انتخاب جمله صحیح با فعل مدال: کدام گزینه جمله‌ای صحیح با استفاده از فعل مدال است؟</h4>
          <label class="option"><input type="radio" name="g31" value="A"> A) You must finish your homework.</label>
          <label class="option"><input type="radio" name="g31" value="B"> B) You must finishing your homework.</label>
          <label class="option"><input type="radio" name="g31" value="C"> C) You shoulds finish your homework.</label>
          <label class="option"><input type="radio" name="g31" value="D"> D) You cans finish your homework.</label>
        </div>
        <div class="question">
          <h4>32. تکمیل جمله: "She ___ speak three languages fluently."</h4>
          <label class="option"><input type="radio" name="g32" value="A"> A) can</label>
          <label class="option"><input type="radio" name="g32" value="B"> B) must</label>
          <label class="option"><input type="radio" name="g32" value="C"> C) may</label>
          <label class="option"><input type="radio" name="g32" value="D"> D) should</label>
        </div>
        <div class="question">
          <h4>33. انتخاب جمله توصیه‌ای صحیح: کدام گزینه جمله‌ای مناسب برای بیان توصیه با فعل مدال است؟</h4>
          <label class="option"><input type="radio" name="g33" value="A"> A) You should take a break if you're tired.</label>
          <label class="option"><input type="radio" name="g33" value="B"> B) You must take a break if you're tired.</label>
          <label class="option"><input type="radio" name="g33" value="C"> C) You cans take a break if you're tired.</label>
          <label class="option"><input type="radio" name="g33" value="D"> D) You may taking a break if you're tired.</label>
        </div>
      </div>
      
      <input type="submit" value="ارسال">
      <div id="result" style="display:none;"></div>
    </form>
  </div>
  
  <!-- پاپ‌آپ نمایش نتیجه -->
  <div id="resultModal" class="modal">
    <div class="modal-content">
      <h2>نتیجه آزمون</h2>
      <!-- نمایش نام و کد ملی کاربر -->
      <p id="userInfo" style="font-weight:bold;"></p>
      <div id="resultContent"></div>
      <button id="closeResultBtn" onclick="closeResultModal()">بستن</button>
    </div>
  </div>
  
  <script>
    // متغیرهای سراسری جهت نگهداری نام و کد ملی کاربر
    var userNationalCode = "";
    var userName = "";
    
    // تایمر 15 دقیقه (15 * 60 ثانیه)
    var totalTime = 15 * 60;
    var timerInterval;
    
    // نمایش پاپ‌آپ شروع در زمان لود صفحه
    window.onload = function() {
      document.getElementById("startModal").style.display = "block";
    };
    
    // رویداد کلیک برای دکمه شروع آزمون
    document.getElementById("startButton").addEventListener("click", function() {
      // دریافت مقادیر ورودی‌های کد ملی و نام
      userNationalCode = document.getElementById("nationalCode").value.trim();
      userName = document.getElementById("userName").value.trim();
      
      // در صورتی که هر دو فیلد پر نشده باشند، هشدار داده می‌شود
      if(userNationalCode === "" || userName === ""){
        alert("لطفاً کد ملی و نام خود را وارد کنید.");
        return;
      }
      
      // در غیر این صورت پاپ‌آپ شروع پنهان شده و تایمر شروع می‌شود
      document.getElementById("startModal").style.display = "none";
      startTimer();
    });
    
    function startTimer() {
      var timerDisplay = document.getElementById("timer");
      var timeRemaining = totalTime;
      timerInterval = setInterval(function() {
        var minutes = Math.floor(timeRemaining / 60);
        var seconds = timeRemaining % 60;
        timerDisplay.textContent = (minutes < 10 ? "0" + minutes : minutes) + ":" +
                                   (seconds < 10 ? "0" + seconds : seconds);
        if(timeRemaining <= 0) {
          clearInterval(timerInterval);
          autoSubmit();
        }
        timeRemaining--;
      }, 1000);
    }
    
    function autoSubmit() {
      alert("زمان شما به پایان رسید. آزمون به صورت خودکار ارسال می‌شود.");
      gradeQuiz();
    }
    
    // تابع غیر فعال کردن فرم پس از ارسال
    function disableForm() {
      var inputs = document.querySelectorAll("#quizForm input");
      for (var i = 0; i < inputs.length; i++) {
        inputs[i].disabled = true;
      }
    }
    
    function gradeQuiz() {
      clearInterval(timerInterval);
      
      var total = 0;
      var score = 0;
      var summary = "";
      
      // ارزیابی پاسخ‌های بخش واژگان (فقط نمایش گزینه انتخاب‌شده)
      for (var i = 1; i <= 10; i++) {
        var qName = "qv" + i;
        var radios = document.getElementsByName(qName);
        var answered = false;
        for (var j = 0; j < radios.length; j++) {
          if (radios[j].checked) {
            answered = true;
            total++;
            summary += qName + ": " + radios[j].value + "<br>";
            break;
          }
        }
        if (!answered) {
          summary += qName + ": بدون پاسخ<br>";
          total++;
        }
      }
      
      // ارزیابی پاسخ‌های بخش گرامر
      for (var i = 1; i <= 33; i++) {
        var qName = "g" + i;
        var radios = document.getElementsByName(qName);
        var answered = false;
        for (var j = 0; j < radios.length; j++) {
          if (radios[j].checked) {
            answered = true;
            total++;
            summary += qName + ": " + radios[j].value + "<br>";
            break;
          }
        }
        if (!answered) {
          summary += qName + ": بدون پاسخ<br>";
          total++;
        }
      }
      
      // محاسبه درصد پاسخ‌های صحیح (اگر بخواهیم، اما در اینجا فقط برای نمایش اضافه شده)
      // در صورتی که بخواهیم امتیاز نشان داده نشود، می‌توانید این قسمت را حذف کنید.
      var percentage = 0; // به دلیل اینکه بررسی صحت پاسخ اهمیت ندارد
      var level = "";
      
      // برای نمونه اگر بخواهیم درصد محاسبه کنیم (با استفاده از پاسخ صحیح)
      /*  
      var answers = { ... } // کد قبلی پاسخ صحیح
      // این بخش حذف شده چون درست یا نادرست بودن پاسخ برای شما اهمیت ندارد.
      */
      
      // تنظیم متن نتیجه؛ همچنین اضافه کردن اطلاعات کاربر در بالای خلاصه
      var resultHTML = "<p>نام: " + userName + " - کد ملی: " + userNationalCode + "</p>" +
                       "<h3>خلاصه پاسخ‌های شما</h3>" + summary;
      
      document.getElementById("resultContent").innerHTML = resultHTML;
      
      disableForm();  // غیرفعال کردن فرم پس از ارسال
      
      // نمایش پاپ‌آپ نتیجه و کاهش شفافیت فرم
      document.getElementById("resultModal").style.display = "block";
      document.getElementById("quizForm").style.opacity = "0.5";
      
      return false; // جلوگیری از ارسال فرم به سرور
    }
    
    function closeResultModal() {
      document.getElementById("resultModal").style.display = "none";
    }
  </script>
</body>
</html>
